(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{39:function(e,t,r){},75:function(e,t,r){"use strict";r.r(t);var n=r(1),c=r.n(n),s=r(9),o=r.n(s),a=(r(39),r(6)),i=r(3),j=Object(n.createContext)(),l=function(e){var t=Object(n.useState)(JSON.parse(localStorage.getItem("usuario"))),r=Object(a.a)(t,2),c=r[0],s=r[1];return Object(i.jsx)(j.Provider,{value:{usuario:c,setUsuario:s},children:e.children})},d=r(13),h=r(5),b=r(4),u=r(14),O=r(19),x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(n.useState)(e),r=Object(a.a)(t,2),c=r[0],s=r[1],o=function(){s(e)},i=function(e){var t=e.target;s(Object(O.a)(Object(O.a)({},c),{},Object(u.a)({},t.name,t.value)))};return[c,i,o]},p=r(10),m=r.n(p),f=r(20),g=r.n(f),v="http://localhost:8000/api",C=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",n="".concat(v,"/").concat(e);return g()({method:r,url:n,data:t})},w=function(){var e=Object(n.useContext)(j),t=e.usuario,r=e.setUsuario,c=Object(h.t)();Object(n.useEffect)((function(){t&&c("/")}),[c,t]);var s=x({nombre:"",apellido:"",correo:"",password:"",cpassword:""}),o=Object(a.a)(s,2),l=o[0],d=o[1],u=x({correo:"",password:""}),O=Object(a.a)(u,2),p=O[0],f=O[1],g=l.nombre,v=l.apellido,w=l.correo,S=l.password,I=l.cpassword;return Object(i.jsx)(b.d,{className:"mt-5",children:Object(i.jsxs)(b.p,{children:[Object(i.jsxs)(b.b,{children:[Object(i.jsx)("h1",{children:"Register"}),Object(i.jsxs)(b.e,{onSubmit:function(e){e.preventDefault(),S!==I?m.a.fire({icon:"error",title:"Error",text:"Las contrase\xf1as no coinciden"}):C("auth/register",l,"POST").then((function(e){console.log(e),m.a.fire({icon:"success",title:"Registro exitoso",text:"Ahora puedes iniciar sesi\xf3n"}),r(e.data),localStorage.setItem("usuario",JSON.stringify(e.data)),c("/")})).catch((function(e){console.log(e.response),m.a.fire({icon:"error",title:"Error",text:e.response.data.message})}))},children:[Object(i.jsxs)(b.f,{children:[Object(i.jsx)(b.h,{for:"nombre",children:"Nombre"}),Object(i.jsx)(b.g,{id:"nombre",name:"nombre",placeholder:"Ingresar Nombre",type:"text",required:!0,minLength:"5",value:g,onChange:d})]}),Object(i.jsxs)(b.f,{children:[Object(i.jsx)(b.h,{for:"apellido",children:"Apellido"}),Object(i.jsx)(b.g,{id:"apellido",name:"apellido",placeholder:"Ingresar Apellido",type:"text",required:!0,minLength:"5",value:v,onChange:d})]}),Object(i.jsxs)(b.f,{children:[Object(i.jsx)(b.h,{for:"email",children:"Email"}),Object(i.jsx)(b.g,{id:"email",name:"correo",placeholder:"Ingresar Email",type:"email",required:!0,value:w,onChange:d})]}),Object(i.jsxs)(b.f,{children:[Object(i.jsx)(b.h,{for:"password",children:"Contrase\xf1a"}),Object(i.jsx)(b.g,{id:"password",name:"password",placeholder:"Ingresar contrase\xf1a",type:"password",required:!0,value:S,onChange:d})]}),Object(i.jsxs)(b.f,{children:[Object(i.jsx)(b.h,{for:"cpassword",children:"Confirmar Contrase\xf1a"}),Object(i.jsx)(b.g,{id:"cpassword",name:"cpassword",placeholder:"Confirmar contrase\xf1a",type:"password",required:!0,value:I,onChange:d})]}),Object(i.jsx)(b.a,{children:"Crear Usuario"})]})]}),Object(i.jsxs)(b.b,{children:[Object(i.jsx)("h1",{children:"Login"}),Object(i.jsxs)(b.e,{onSubmit:function(e){e.preventDefault(),C("auth/login",p,"POST").then((function(e){console.log(e),m.a.fire({icon:"success",title:"Bienvenido al Sistema",text:"Logeado correctamente"}),r(e.data),localStorage.setItem("usuario",JSON.stringify(e.data)),c("/")})).catch((function(e){console.log(e.response),m.a.fire({icon:"error",title:"Error",text:e.response.data.message})}))},children:[Object(i.jsxs)(b.f,{children:[Object(i.jsx)(b.h,{for:"email",children:"Email"}),Object(i.jsx)(b.g,{id:"email",name:"correo",placeholder:"Ingresar Email",type:"email",required:!0,value:p.correo,onChange:f})]}),Object(i.jsxs)(b.f,{children:[Object(i.jsx)(b.h,{for:"password",children:"Contrase\xf1a"}),Object(i.jsx)(b.g,{id:"password",name:"password",placeholder:"Ingresar contrase\xf1a",type:"password",required:!0,value:p.password,onChange:f})]}),Object(i.jsx)(b.a,{children:"Ingresar"})]})]})]})})},S=r(16),I=function(){var e=Object(n.useContext)(j),t=e.usuario,r=e.setUsuario,c=Object(h.t)();Object(n.useEffect)((function(){t||c("/login")}),[c,t]);return Object(i.jsxs)(b.l,{color:"vino",expand:"md",dark:!0,full:!0,children:[Object(i.jsx)(S.LinkContainer,{to:"/",children:Object(i.jsx)(b.m,{children:"PROYECTO BASE"})}),Object(i.jsx)(b.o,{onClick:function(){}}),Object(i.jsxs)(b.c,{navbar:!0,children:[Object(i.jsxs)(b.i,{className:"me-auto",navbar:!0,children:[Object(i.jsx)(b.j,{children:Object(i.jsx)(S.LinkContainer,{to:"/",children:Object(i.jsx)(b.k,{children:"Inicio"})})}),Object(i.jsx)(b.j,{children:Object(i.jsx)(S.LinkContainer,{to:"/usuarios",children:Object(i.jsx)(b.k,{children:"Usuarios"})})})]}),Object(i.jsxs)(b.n,{children:["Bienvenido/a ",null===t||void 0===t?void 0:t.nombre," - ",Object(i.jsx)(b.a,{onClick:function(){localStorage.removeItem("usuario"),r(null),c("/login")},color:"light",children:"SALIR"})]})]})]})},E=function(){return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(I,{}),Object(i.jsx)("h1",{children:"PANTALLA PRINCIPAL"})]})},k=function(){var e=Object(n.useState)([]),t=Object(a.a)(e,2),r=t[0],c=t[1];return Object(n.useEffect)((function(){(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",n="".concat(v,"/").concat(e),c=JSON.parse(localStorage.getItem("usuario")).token||"";return g()({method:r,url:n,data:t,headers:{"Content-type":"application/json","x-token":c}})})("usuarios").then((function(e){c(e.data)})).catch((function(e){m.a.fire({icon:"error",title:"Error",text:e.response.data.message})}))}),[]),Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(I,{}),Object(i.jsxs)(b.d,{className:"mt-5",children:[Object(i.jsx)("h1",{children:"Usuarios"}),Object(i.jsxs)(b.q,{striped:!0,children:[Object(i.jsx)("thead",{children:Object(i.jsxs)("tr",{children:[Object(i.jsx)("th",{children:"Nombre"}),Object(i.jsx)("th",{children:"Apellido"}),Object(i.jsx)("th",{children:"Correo"})]})}),Object(i.jsx)("tbody",{children:r.map((function(e){return Object(i.jsxs)("tr",{children:[Object(i.jsx)("td",{children:e.nombre}),Object(i.jsx)("td",{children:e.apellido}),Object(i.jsx)("td",{children:e.correo})]},e._id)}))})]})]})]})},y=function(){return Object(i.jsx)(d.BrowserRouter,{children:Object(i.jsxs)(h.f,{children:[Object(i.jsx)(h.d,{path:"/",element:Object(i.jsx)(E,{})}),Object(i.jsx)(h.d,{path:"/login",element:Object(i.jsx)(w,{})}),Object(i.jsx)(h.d,{path:"/usuarios",element:Object(i.jsx)(k,{})})]})})},L=function(){return Object(i.jsx)(l,{children:Object(i.jsx)(y,{})})};o.a.render(Object(i.jsx)(c.a.StrictMode,{children:Object(i.jsx)(L,{})}),document.getElementById("root"))}},[[75,1,2]]]);
//# sourceMappingURL=main.dda23a5a.chunk.js.map